\RequirePackage[textwidth=1.5in]{todonotes}
\RequirePackage{comment}
\newenvironment{nomarginbox}[2]{%
  \begin{mdframed}[
    innerleftmargin=0pt,
    innerrightmargin=0pt,
    innertopmargin=0pt,
    innerbottommargin=0pt,
    skipabove=0pt,
    skipbelow=0pt,
    backgroundcolor=#1,
    linecolor=#2,
    linewidth=1pt
  ]
}{%
  \end{mdframed}
}

\newcommand{\todocolor}{violet!75!red}

% \itodo and environments correction and lessimportant
\newenvironment{itodo}
  {\begin{nomarginbox}{green!3}{red}}
  {\end{nomarginbox}}

\newenvironment{correction}
  {\begin{nomarginbox}{red!1}{red!80!black}\color{red!80!black}}
  {\end{nomarginbox}}

\newenvironment{lessimportant}%
  {\begingroup\small\color{gray}}%
  {\endgroup}


% \markabove and \markbelow
\usetikzlibrary{arrows.meta}
\newcommand{\uppertip}{
  \tikz[anchor=base, baseline]{
    \draw[-{Triangle}, thick] (0,1ex) -- (0,1.1ex);
  }
}

\newcommand{\lowertip}{
  \tikz[anchor=base, baseline]{
    \draw[-{Triangle}, thick] (0,-0.5ex) -- (0,-0.6ex);
  }
}

% from: https://tex.stackexchange.com/questions/142242/robust-way-to-mark-draft-text
\RequirePackage{stackengine}
\setstackgap{L}{.5\baselineskip}
\newcommand\markabove[2]{{%
  \sffamily\bfseries\boldmath\color{\todocolor}%
  \hsmash{\uppertip}% 
  \smash{\toplap{#1}{\scriptsize#2}}%
}}
\newcommand\markbelow[2]{{%
  \sffamily\bfseries\boldmath\color{\todocolor}% 
  \hsmash{\lowertip}%
  \smash{\bottomlap{#1}{\scriptsize#2}}%
}}

